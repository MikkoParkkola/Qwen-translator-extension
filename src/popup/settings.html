<!DOCTYPE html>
<html data-qwen-theme="apple">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../styles/apple.css">
  <style>
    html { height: 100%; background: var(--qwen-bg, rgba(28,28,30,0.7)); }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 1rem;
      color: var(--qwen-text, #f5f5f7);
    }
    .tabs { display: flex; gap: 0.5rem; margin-bottom: 0.5rem; }
    .tabs button {
      background: none;
      border: 1px solid var(--qwen-border, rgba(255,255,255,0.2));
      color: inherit;
      padding: 0.25rem 0.5rem;
      cursor: pointer;
    }
    .tabs button.active { background: var(--qwen-secondary-bg, rgba(118,118,128,0.2)); }
    .tab { display: none; }
    .tab.active { display: block; }
    label { display: block; margin-bottom: 0.5rem; }
    input[type="number"] { width: 5rem; }
    textarea { width: 100%; }
    .invalid { border-color: #ff4d4f; }
    .note { font-size: 0.8rem; opacity: 0.8; }
  </style>
</head>
<body>
  <div class="tabs">
    <button data-tab="general">General</button>
    <button data-tab="providers">Providers</button>
    <button data-tab="advanced">Advanced</button>
    <button data-tab="diagnostics">Diagnostics</button>
  </div>

  <div id="generalTab" class="tab">
    <section id="detectionSection">
      <h3>Language Detection</h3>
      <label><input type="checkbox" id="enableDetection"> Enable automatic detection</label>
      <p class="note">Automatically detect the source language before translating.</p>
    </section>
    <section id="glossarySection">
      <h3>Glossary</h3>
      <textarea id="glossary" rows="4" placeholder="term=translation"></textarea>
      <p class="note">One entry per line, using "term=translation".</p>
    </section>
  </div>

  <div id="providersTab" class="tab">
    <section id="providerSection">
      <h3>Providers</h3>
      <ul id="providerList"></ul>
      <button id="addLocalProvider">Add Local Provider</button>
      <div id="localProviderWizard" hidden>
        <label>Type
          <select id="localProviderType">
            <option value="ollama">Ollama</option>
            <option value="macos">macOS</option>
          </select>
        </label>
        <div id="ollamaForm" class="localForm">
          <label>Path <input id="ollamaPath" placeholder="http://localhost"></label>
          <label>Port <input id="ollamaPort" type="number" placeholder="11434"></label>
          <label>Model <input id="ollamaModel" placeholder="llama2"></label>
        </div>
        <div id="macosForm" class="localForm" style="display:none">
          <label>Path <input id="macosPath" placeholder="/usr/bin/translate"></label>
          <label>Port <input id="macosPort" type="number" placeholder="0"></label>
          <label>Model <input id="macosModel" placeholder="system"></label>
        </div>
        <button id="saveLocalProvider">Save</button>
      </div>
    </section>
  </div>

  <div id="advancedTab" class="tab">
    <section id="limitSection">
      <h3>Rate Limits</h3>
      <label>Requests/min <input type="number" id="requestLimit" min="0"></label>
      <label>Tokens/min <input type="number" id="tokenLimit" min="0"></label>
      <p class="note">Rate limits are known only for Qwen models. Other providers may be unlimited or undocumented. Only Google Translate and DeepL free publish monthly character quotas.</p>
    </section>
    <section id="cacheSection">
      <h3>Cache</h3>
      <label><input type="checkbox" id="cacheEnabled"> Enable translation memory</label>
      <button id="clearCache">Clear cache</button>
    </section>
  </div>

  <div id="diagnosticsTab" class="tab">
    <section id="statsDetails">
      <h3>Usage</h3>
      <pre id="usageStats">-</pre>
    </section>
  </div>

  <script src="../providers/index.js"></script>
  <script src="settings.js"></script>
</body>
</html>

