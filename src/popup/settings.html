<!DOCTYPE html>
<html data-qwen-theme="apple">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../styles/apple.css">
  <style>
    html {
      height: 100%;
      background: var(--qwen-bg, rgba(28,28,30,0.7));
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      padding: 1rem;
      margin: 0;
      color: var(--qwen-text, #f5f5f7);
    }
    ul { list-style: none; padding: 0; margin: 0; }
    li {
      padding: 0.5rem;
      border: 1px solid var(--qwen-border, rgba(255,255,255,0.2));
      margin-bottom: 0.5rem;
      cursor: move;
      background: var(--qwen-secondary-bg, rgba(118,118,128,0.2));
    }
    .provider-row { display:flex; flex-wrap:wrap; gap:0.5rem; align-items:center; }
    .provider-row .provider-name { min-width:6rem; }
    .provider-row input { flex:1; min-width:6rem; }
    .model-warning { color:#ffae00; font-size:0.8rem; }
    .invalid { border-color:#ff4d4f; }
    .flags { margin-top:1rem; display:flex; gap:1rem; align-items:center; }
    .form-group { display:flex; flex-direction:column; gap:0.5rem; margin-top:0.5rem; }
    .form-group input, .form-group select { width:100%; }
    .tabs { display:flex; gap:0.5rem; margin-bottom:0.5rem; }
    .tabs button { background:none; border:1px solid var(--qwen-border, rgba(255,255,255,0.2)); color:inherit; padding:0.25rem 0.5rem; cursor:pointer; }
    #presets { display:flex; gap:0.5rem; flex-wrap:wrap; margin-bottom:0.5rem; }
  </style>
</head>
<body>
  <div class="tabs">
    <button class="active" data-tab="providers">Providers</button>
  </div>
  <div id="providersTab" class="tab">
    <div id="presets">
      <button data-preset="openai">OpenAI</button>
      <button data-preset="deepl">DeepL</button>
      <button data-preset="ollama">Ollama</button>
      <button data-preset="macos">macOS</button>
    </div>
    <div id="recommendation" style="margin-bottom:0.5rem"></div>
    <ul id="providerList"></ul>
    <div class="flags">
      <label><input type="checkbox" id="failover"> Failover</label>
      <label>Parallel
        <select id="parallel">
          <option value="auto">Auto</option>
          <option value="on">On</option>
          <option value="off">Off</option>
        </select>
      </label>
    </div>
    <button id="save" class="primary">Save</button>
    <div id="status"></div>
  </div>

  <template id="providerTemplate">
    <li draggable="true">
      <div class="provider-row">
        <span class="provider-name"></span>
        <input type="text" data-field="apiKey" placeholder="API Key">
        <input type="text" data-field="apiEndpoint" placeholder="Endpoint">
        <input type="text" data-field="model" placeholder="Model">
        <input type="number" data-field="requestLimit" placeholder="Req/min" min="0">
        <input type="number" data-field="tokenLimit" placeholder="Tok/min" min="0">
      </div>
      <details>
        <summary>Advanced</summary>
        <div class="form-group">
          <label>Models<input type="text" data-field="models" placeholder="comma separated"></label>
          <div class="extra-limits"></div>
          <label>Strategy
            <select data-field="strategy">
              <option value="cheap">Cheap</option>
              <option value="fast">Fast</option>
              <option value="quality">Quality</option>
              <option value="balanced">Balanced</option>
            </select>
          </label>
          <div class="model-warning" style="display:none"></div>
        </div>
      </details>
    </li>
  </template>

  <script src="../lib/providers.js"></script>
  <script src="../providers/openai.js"></script>
  <script src="../providers/openrouter.js"></script>
  <script src="../providers/dashscope.js"></script>
  <script src="../providers/ollama.js"></script>
  <script src="../providers/anthropic.js"></script>
  <script src="../providers/deepl.js"></script>
  <script src="../providers/macos.js"></script>
  <script src="../providerConfig.js"></script>
  <script src="settings.js"></script>
</body>
</html>
