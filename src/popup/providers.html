<!DOCTYPE html>
<html data-qwen-theme="cyberpunk">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="../styles/cyberpunk.css">
  <style>
    html {
      height: 100%;
      background: var(--qwen-bg, #0a0c14) url('../styles/popup-bg.svg') center/cover fixed no-repeat;
    }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      padding: 1rem;
      margin: 0;
      color: var(--qwen-text, #e6f7ff);
    }
    ul { list-style: none; padding: 0; margin: 0; }
    li {
      padding: 0.5rem;
      border: 1px solid var(--qwen-border, #00e5ff);
      margin-bottom: 0.5rem;
      cursor: move;
      background: rgba(0,0,0,0.2);
    }
    .provider-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }
    .provider-row .provider-name {
      min-width: 6rem;
    }
    .provider-row input {
      flex: 1;
      min-width: 6rem;
    }
    .model-warning {
      color: #ffae00;
      font-size: 0.8rem;
    }
    .invalid {
      border-color: #ff4d4f;
    }
    .flags { margin-top: 1rem; display: flex; gap: 1rem; align-items: center; }
    .form-group { display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem; }
    .form-group input, .form-group select { width: 100%; }
  </style>
</head>
<body class="qwen-bg-animated">
  <h3>Providers</h3>
  <ul id="providerList"></ul>
  <div class="flags">
    <label><input type="checkbox" id="failover"> Failover</label>
    <label><input type="checkbox" id="parallel"> Parallel</label>
  </div>
  <button id="save" class="primary-glow btn-frame">Save</button>
  <div id="status"></div>

  <template id="providerTemplate">
    <li draggable="true">
      <div class="provider-row">
        <span class="provider-name"></span>
        <input type="text" data-field="apiKey" placeholder="API Key">
        <input type="text" data-field="apiEndpoint" placeholder="Endpoint">
        <input type="text" data-field="model" placeholder="Model">
        <input type="number" data-field="requestLimit" placeholder="Req/min" min="0">
        <input type="number" data-field="tokenLimit" placeholder="Tok/min" min="0">
      </div>
      <details>
        <summary>Advanced</summary>
        <div class="form-group">
          <label>Models<input type="text" data-field="models" placeholder="comma separated"></label>
          <div class="extra-limits"></div>
          <label>Strategy
            <select data-field="strategy">
              <option value="balanced">Balanced</option>
              <option value="cost">Optimize cost</option>
              <option value="speed">Optimize speed</option>
              <option value="quality">Optimize quality</option>
            </select>
          </label>
          <div class="model-warning" style="display:none"></div>
        </div>
      </details>
    </li>
  </template>

  <script src="../config.js"></script>
  <script src="providers.js"></script>
</body>
</html>
