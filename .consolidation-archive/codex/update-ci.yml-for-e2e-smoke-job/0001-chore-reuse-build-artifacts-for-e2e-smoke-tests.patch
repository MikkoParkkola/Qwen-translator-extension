From 2593121fb0f44e639a7789cd7a11b7fe1daea56a Mon Sep 17 00:00:00 2001
From: MikkoParkkola <78788115+MikkoParkkola@users.noreply.github.com>
Date: Tue, 19 Aug 2025 16:07:54 +0200
Subject: [PATCH] chore: reuse build artifacts for e2e smoke tests

---
 .github/workflows/ci.yml | 20 ++++++++++++++++----
 1 file changed, 16 insertions(+), 4 deletions(-)

diff --git a/.github/workflows/ci.yml b/.github/workflows/ci.yml
index df16e9f..382e69e 100644
--- a/.github/workflows/ci.yml
+++ b/.github/workflows/ci.yml
@@ -48,6 +48,12 @@ jobs:
           name: dist
           path: dist/
 
+      - name: Upload node_modules
+        uses: actions/upload-artifact@v4
+        with:
+          name: node_modules
+          path: node_modules/
+
       - name: Upload zip
         uses: actions/upload-artifact@v4
         with:
@@ -67,11 +73,17 @@ jobs:
           node-version: '20'
           cache: 'npm'
 
-      - name: Install dependencies
-        run: npm ci
+      - name: Download dist
+        uses: actions/download-artifact@v4
+        with:
+          name: dist
+          path: .
 
-      - name: Build dist
-        run: npm run build
+      - name: Download node_modules
+        uses: actions/download-artifact@v4
+        with:
+          name: node_modules
+          path: .
 
       - name: Install Playwright (Chromium + deps)
         run: npx playwright install --with-deps chromium
-- 
2.50.0

